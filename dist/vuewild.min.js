!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.vuewild=n():e.vuewild=n()}(this,function(){return function(e){function n(o){if(i[o])return i[o].exports;var t=i[o]={exports:{},id:o,loaded:!1};return e[o].call(t.exports,t,t.exports,n),t.loaded=!0,t.exports}var i={};return n.m=e,n.c=i,n.p="",n(0)}([function(e,n){function i(e){return"function"==typeof e.key?e.key():e.key}function o(e){return"function"==typeof e.ref?e=e.ref():"object"==typeof e.ref&&(e=e.ref),e}function t(e){return"[object Object]"===Object.prototype.toString.call(e)}function r(e){var n=e.val(),o=t(n)?n:{".value":n};return o[".key"]=i(e),o}function d(e,n){for(var i=0;i<e.length;i++)if(e[i][".key"]===n)return i;return-1}function l(e,n,i){var r=!1,d=null,l=null;if(t(i)&&i.hasOwnProperty("source")&&(r=i.asObject,d=i.cancelCallback,l=i.readyCallback,i=i.source),!t(i))throw new Error("VueWild: invalid Wilddog binding source.");var c=o(i);e.$wilddogRefs[n]=c,e._wilddogSources[n]=i,d&&(d=d.bind(e)),r?f(e,n,i,d):u(e,n,i,d),l&&i.once("value",l.bind(e))}function c(e,n,i){n in e?e[n]=i:v.util.defineReactive(e,n,i)}function u(e,n,o,t){var l=[];c(e,n,l);var u=o.on("child_added",function(e,n){var i=n?d(l,n)+1:0;l.splice(i,0,r(e))},t),f=o.on("child_removed",function(e){var n=d(l,i(e));l.splice(n,1)},t),s=o.on("child_changed",function(e){var n=d(l,i(e));l.splice(n,1,r(e))},t),a=o.on("child_moved",function(e,n){var o=d(l,i(e)),t=l.splice(o,1)[0],r=n?d(l,n)+1:0;l.splice(r,0,t)},t);e._wilddogListeners[n]={child_added:u,child_removed:f,child_changed:s,child_moved:a}}function f(e,n,i,o){c(e,n,{});var t=i.on("value",function(i){e[n]=r(i)},o);e._wilddogListeners[n]={value:t}}function s(e,n){var i=e._wilddogSources&&e._wilddogSources[n];if(!i)throw new Error('VueWild: unbind failed: "'+n+'" is not bound to a Wilddog reference.');var o=e._wilddogListeners[n];for(var t in o)i.off(t,o[t]);e[n]=null,e.$wilddogRefs[n]=null,e._wilddogSources[n]=null,e._wilddogListeners[n]=null}function a(e){e.$wilddogRefs||(e.$wilddogRefs=Object.create(null),e._wilddogSources=Object.create(null),e._wilddogListeners=Object.create(null))}function p(e){v=e,v.mixin(g);var n=v.config.optionMergeStrategies;n.wilddog=n.provide,v.prototype.$bindAsObject=function(e,n,i,o){a(this),l(this,e,{source:n,asObject:!0,cancelCallback:i,readyCallback:o})},v.prototype.$bindAsArray=function(e,n,i,o){a(this),l(this,e,{source:n,cancelCallback:i,readyCallback:o})},v.prototype.$unbind=function(e){s(this,e)}}var v,w=function(){var e=this.$options.wilddog;if("function"==typeof e&&(e=e.call(this)),e){a(this);for(var n in e)l(this,n,e[n])}},g={created:w,beforeDestroy:function(){if(this.$wilddogRefs){for(var e in this.$wilddogRefs)this.$wilddogRefs[e]&&this.$unbind(e);this.$wilddogRefs=null,this._wilddogSources=null,this._wilddogListeners=null}}};"undefined"!=typeof window&&window.Vue&&p(window.Vue),e.exports=p}])});